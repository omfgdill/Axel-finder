
<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Axel-Finder</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f4f6f8;
            --card-bg: #ffffff;
            --text: #003366;
            --button: #0077cc;
            --button-hover: #005fa3;
        }
        body.dark {
            --bg: #1e1e1e;
            --card-bg: #2a2a2a;
            --text: #ffffff;
            --button: #3399ff;
            --button-hover: #007acc;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            padding: 20px;
            margin: 0;
            color: var(--text);
        }
        h1, h2 {
            text-align: center;
        }
        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            margin-top: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: 600;
        }
        input, select, button {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            margin-top: 5px;
            border-radius: 6px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        button {
            background-color: var(--button);
            color: white;
            font-weight: bold;
            border: none;
            margin-top: 20px;
        }
        button:hover {
            background-color: var(--button-hover);
        }
        .result-box {
            background-color: #e0f0ff;
            color: #003366;
            padding: 15px;
            border-radius: 8px;
            margin-top: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            text-align: center;
        }
        .lok-inline {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .lok-inline-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 500;
        }
        .lok-inline-item select {
            width: 60px;
            padding: 6px;
        }
        .flex-row {
            display: flex;
            gap: 20px;
        }
        .flex-row > div {
            flex: 1;
        }
        @media (max-width: 767px) {
            .flex-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <h1>Axel-Finder</h1>
    <div class="card">
        <button onclick="toggleDarkMode()">Byt till mörkt/ljust läge</button>

        <h2>Lokinställningar</h2>
        <label for="numLok">Antal lok:</label>
        <input type="number" id="numLok" value="2" min="1" onchange="generateLokInputs()">
        <div id="lokInputs" class="lok-inline"></div>

        <h2>Vagninställningar</h2>
        <div class="flex-row">
            <div>
                <label for="vagnTyp">Vagntyp:</label>
                <select id="vagnTyp">
                    <option value="8">IW (8 axlar)</option>
                    <option value="4">Sgnss (4 axlar)</option>
                </select>
            </div>
            <div>
                <label for="numVagnar">Antal vagnar:</label>
                <input type="number" id="numVagnar" value="22" min="0">
            </div>
        </div>

        <h2>Axelsökning</h2>
        <label for="axelSok">Axelnummer att söka (separera flera med komma):</label>
        <input type="text" id="axelSok" placeholder="Ex: 5,12,23">

        <button onclick="beraknaAxel()">BERÄKNA</button>
        <button onclick="nollstall()">Nollställ</button>
        <div id="totalAxlar" style="margin-top:15px; font-weight:600;"></div>
        <div id="resultat" class="result-box" style="display:none;"></div>
    </div>

    <script>
        function toggleDarkMode() {
            document.body.classList.toggle("dark");
        }

        function generateLokInputs() {
            const container = document.getElementById("lokInputs");
            const antal = parseInt(document.getElementById("numLok").value);
            container.innerHTML = "";
            for (let i = 1; i <= antal; i++) {
                const wrapper = document.createElement("div");
                wrapper.className = "lok-inline-item";
                const label = document.createElement("label");
                label.textContent = "Lok " + i + ":";
                const select = document.createElement("select");
                select.id = "lokAxlar" + i;
                [4, 6].forEach(val => {
                    const option = document.createElement("option");
                    option.value = val;
                    option.text = val;
                    select.appendChild(option);
                });
                wrapper.appendChild(label);
                wrapper.appendChild(select);
                container.appendChild(wrapper);
            }
        }

        function beraknaAxel() {
            const lokCount = parseInt(document.getElementById("numLok").value);
            const vagnTyp = parseInt(document.getElementById("vagnTyp").value);
            const vagnCount = parseInt(document.getElementById("numVagnar").value);
            const axelSokInput = document.getElementById("axelSok").value;
            const axelSokLista = axelSokInput.split(",").map(a => parseInt(a.trim())).filter(a => !isNaN(a));

            let axelLista = [];
            for (let i = 1; i <= lokCount; i++) {
                const axlar = parseInt(document.getElementById("lokAxlar" + i).value);
                for (let j = 1; j <= axlar; j++) {
                    axelLista.push({ typ: "Lok", nr: i, axel: j });
                }
            }

            for (let i = 1; i <= vagnCount; i++) {
                for (let j = 1; j <= vagnTyp; j++) {
                    axelLista.push({ typ: "Vagn", nr: i, axel: j });
                }
            }

            document.getElementById("totalAxlar").textContent = "Totalt antal axlar: " + axelLista.length;

            const resRuta = document.getElementById("resultat");
            let resultatTexter = [];
            for (const axelSok of axelSokLista) {
                if (axelSok < 1 || axelSok > axelLista.length) {
                    resultatTexter.push("Axel " + axelSok + " är utanför räckvidd (max: " + axelLista.length + ")");
                } else {
                    const axel = axelLista[axelSok - 1];
                    resultatTexter.push("Axel " + axelSok + " tillhör " + axel.typ + " " + axel.nr + ", axel " + axel.axel);
                }
            }
            resRuta.innerHTML = resultatTexter.join("<br>");
            resRuta.style.display = "block";
        }

        function nollstall() {
            document.getElementById("numLok").value = 2;
            document.getElementById("vagnTyp").value = 8;
            document.getElementById("numVagnar").value = 22;
            document.getElementById("axelSok").value = "";
            document.getElementById("resultat").style.display = "none";
            document.getElementById("totalAxlar").textContent = "";
            generateLokInputs();
        }

        generateLokInputs();
    </script>
</body>
</html>
